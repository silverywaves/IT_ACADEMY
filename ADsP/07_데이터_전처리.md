### 데이터 마트와 전처리 패키지
#### 데이터 웨어하우스 & 마트
- 데이터 웨어하우스
  - 여러 데이터베이스(RDB, 클라우드, NoSQL 등)로부터 공통의 형식으로 변환되어 사용자의 의사결정에 도움이 되기위한 일시적인 데이터 집합

- 데이터 마트
  - 특정한 목적을 달성하기 위해 활용되는 소규모 데이터 웨어하우스
  - 데이터 웨어하우스와 사용자 사이의 중간층에 위치


---

#### 데이터 전처리
- 정형화된 데이터 분석 수행을 위해서 특정한 데이터 행태를 요구
  - ex. 결측값, 이상값, 변수선택, 차원축소, 파생변수 생성


---

#### 데이터 전처리 패키지
- Reshape
  - melt : '녹이다' => 특정 변수 데이터를 녹여 세분화 데이터 생성
  - cast : '주조하다' => melt 로 녹인 데이터를 요약을 위해 새롭게 가공

- sqldf
  - R 에서 sql 명령어를 사용 가능하게 해주는 패키지

- plyr
  - apply 함수 기반 데이터 분할 후 특정 함수를 적용하여 재결합
    - Split-Apply-Combine
  - 함수 naming 규칙 - a(rray), d(ata frame), l(ist), _(nothing)

- 데이터 테이블
  - 큰 데이터를 탐색, 연산, 병합하는데 유용
    - 내부에 인덱스를 포함하여 연산 및 검색이 빠름


---

### 데이터 탐색
#### 탐색적 데이터 분석
- EDR(Exploratory Data Analysis)
- 데이터를 이해하고 의미있는 관계를 찾아내기 위해 통계값 및 분포 등을 시각화하고 분석하는 것


---

#### 결측값과 처리방법
- 결측값
  - 존재하지 않는 데이터(=null 값)
  - NA(Not Available)
  - 일반적으로 제거하나, 결측값 자체가 의미를 가질 수 있는 데이터도 존재함

- 처리방법
  - 단순 대치법
    - Completes Analysis
       - 결측값을 보유한 데이터 삭제
       - 결측값이 많은 경우 대량의 데이터 손실 우려

    - 평균 대치법
      - 비조건부 평균 대치법 : 결측값이 존재하는 열의 평균 & 중앙값으로 대치
      - 조건부 평균 대치법   : 회귀분석을 통해 가장 가능성 높은 값으로 대치
        
    - 단순확률 대치법
      - 평균 대치에서 표준 오차의 과소추정 문제 보안
      - ex. Hot deck 방법, Nearest Neighbor 방법
        
  - 다중 대치법
    - 여러번 대치 -> n개의 가상적 완전 자료 생성 후 결측값 대치
    - 대치 -> 분석 -> 결합 3단계의 과정
    - Bootstrapping Based Algorithm을 활용한 다중대치법

---

#### 이상값과 처리 방법
- 이상값
  - 의도하지 않게 잘못 입력(Bad Data)
  - 의도하지 않게 입력 + 목적 부합X 제거 필요 / 분석에 포함
  - 의도된 이상값(Fraud, 불량)
  => 이상값을 꼭 제거해야 하는 것이 아니므로 분석의 목적 및 종류에 따라 판단


- 인식 방법
  - ESD(Extreme Studentized Deviation)
    - 평균으로부터 3 표준편차 떨어진 값

  - (기하평균 - 2.5 * 표준편차) < data < (기하평균 + 2.5 * 표준편차)

  - 사분위수 이용 (상자 그림의 outer fence 밖의 값)
    - 이상값 : Q1 - 1.5 (Q3 - Q1) < data < Q3 + 1.5 (Q3 - Q1) 을 벗어나는 데이터




![상자수염그림](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/478aad5f-dd58-4700-b201-8945694f77a5)


```
  IQR(Inter Quartile Range)
    : 이상값을 구하기 위해 Q3 - Q1 한 값
```


- 처리 방법
  - 극단값 절단(Trimming) 
    - 기하 평균을 이용한 제거 : geo_mean
    - 하단, 상단 % 이용한 제거 : 10% 절단(상하위 5% 에 해당되는 데이터 제거)

  - 극단값 조정(Winsorizing)
    - 상한값과 하한값을 벗어나는 값들을 각각 상한, 하한 값으로 바꾸어 활용
    - 극단값 절단 방법보다 데이터 손실율이 적고, 설명력이 높음



