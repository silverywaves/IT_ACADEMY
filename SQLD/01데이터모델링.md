## 데이터 모델링의 이해
### 01. 데이터 모델링 개요
  - 모델링이란?
    - 복잡현 현실 세계를 추상화, 단순화하여 일정한 표기법에 의해 명확하게 표현하는 것
    - 업무 정보를 구성화하는 기초가 되는 정보들을 일정한 표기법으로 표현
    - 정보시스템을 구축하기 위한 데이터 관점의 업무 분석 기법
    - 데이터베이스를 구축하기 위한 분석 및 설계 과정

    - 추상화(모형화), 단순화, 명확화
      <-> 구체화, 복잡화, 일반화
    
    - 모델(Model) : 현실 세게의 추상화된 반영


![모델링이란](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/889c19c6-6486-47e3-b0f1-83811f4f809a)


   
  - 모델링 관점
    - 데이터 관점(What)
      - 데이터와 데이터 간 관계, 업무와 데이터 간 관계를 모델링
      
      - 데이터에 접근하는 방법(How), 사람(Who)과는 무관
        
    - 프로세스 관점(How)
      - 업무가 실제로 하고 있는 일 또는 해야할 일을 모델링
        
    - 데이터와 프로세스의 상관 관점(Interaction)
      - 업무 처리 방법에 따라 데이터가 받는 영향을 모델링


![모델링 관점](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/ab713542-611f-4270-882f-a44fc78d6cca)


 - 데이터 모델링 유의점
    - 중복(Duplication)
      - 여러 장소의 데이터베이스에 같은 정보를 저장하지 않도록 하여 중복성 최소화

    - 비유연성(Inflexibility)
      - 데이터의 정의를 데이터의 사용 프로세스와 분리하여 유연성 높임

    - 비일관성(Inconsistency)
      - 데이터 간의 상호 연관ㄱ한계를 명확하게 정의하여 일관성 있게 데이터가 유지되도록 함


---

### 02. 데이터 모델링의 3단계
- 개념적, 논리적, 믈리적 모델링
  - 개념적 데이터 모델링(Conceptual Data Modeling)
    - 핵심 엔터티와 그들 간의 관계를 발견하고, 그것을 표현하기 위해서 엔터티-관계 다이어그램 생성
      - 엔터티-관계 다이어그램 : 조직, 데이터베이스 사용자에게 어떤 데이터가 중요한지 나타내기 위해 사용

    - 사용자와 시스템 개발자가 데이터 요구 사항을 발견하는 것을 지원
   
    - 현 시스템이 어떻게 변형되어야 하는가를 이해하는데 유용함
      
    - 추상화 수준이 높고 업무중심적
      
    - 포괄적 수준의 모델링 진행
      
    - 전사적 데이터 모델링, EA 수립 등


  - 논리적 데이터 모델링(Logical Data Modeling)
    - 설계 프로세스의 Input으로서 비즈니스 정보의 논리적인 구조와 규칙을 명확하게 표현하는 기법, 과정
      - 데이터 모델링 과정에서 가장 핵심
      - 정규화 활동
        
    - 논리 데이터 모델 상세화 과정의 대표적인 활동
   
    - 논리 데이터 모델의 일관성 확보, 중복 제거 -> 속성들을 가장 적절한 엔터티에 배치 -> 신뢰성있는 데이터구조
      
    - 시스템으로 구축하고자 하는 업무에 대해 Key, 속성, 관계 등 정확하게 표현
      
    - 재사용성 높음


  - 물리적 데이터 모델링(Physical Data Modeling)
    - 물리적 스키마 : 데이터가 물리적으로 컴퓨터에 어떻게 저장될 것인가에 대한 정의
      
    - 실제로 데이터베이스에 이실할 수 있도록 성능, 저장 등 물리적인 성격 고려하여 설계
      - 테이블, 칼럼 등으로 표현되는 물리적인 저장구조와 사용될 저장 장치 , 자료 추출관련 접근 방법 결정

![데이터 모델링의 3단계](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/1b76e6c6-6573-427d-9ca3-a98591d433dc)

  

![데이터 모델링 단계(학계와 산업계의 이해)](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/3220ea94-db47-458e-b76a-ae7d5977f0ed)



---
    
### 03. 데이터 독립성
- 물리적 데이터 독립성, 논리적 데이터 독립성
  - 파일 시스템
 
![파일시스템](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/a60460ea-5966-49a1-a7da-a88424639c46)




  - 데이터베이스 시스템


![데이터베이스 시스템](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/6318b26d-ce74-4f06-a06f-4bb7db1ff90b)




  - 데이터베이스의 3단계 구조
    - 외부스키마(External Schema)
      - 각 사용자 또는 응용프로그램이 바라보는 스키마
      - 논리적인 데이터 독립성 고려
      - ex. view 단계

    - 개념 스키마(Conceptual Schema)
      - 모든 사용자의 관점을 통합한 스키마
      - 논리적 & 물리적 데이터 독립성 고려
      - DB에 저장되는 데이터와 그들 간의 관계를 표현

    - 내부 스키마(Physical Schema)
      - DB가 물리적으로 저장된 형식
      - 물리적 데이터 독립성 고려

    => 데이터 모델링은 통합 관점의 개념 스키마를 만들어 가는 과정


![데이터베이스 3단계 구조](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/712515dd-4377-4f21-b6bf-52e0e586d8b6)


 


  - 데이터의 독립성과 종속성
    - 데이터 종속성
      - 응용 프로그램에 대한 데이터의 종속성
        
      - ex. 파일 시스템
        - 응용 프로그램과 데이터가 상호의존적
        - 데이터를 저장한 파일 구조가 변경되면 이에 대응되는 응용 프로그램도 변경되어야 함

    - 데이터 독립성
      - 데이터 구조가 변경되어도 응용 프로그램이 변경될 필요 없음
        
      - 논리적 독립성 + 물리적 독립성으로 실현
        
      - 논리적 독립성
        - 논리적 사상(외부적/개념적 사상)을 통해 논리적 독립성이 보장됨
        - 개념 스키마가 변경되어도 외부 스키마에는 영향 X
        - 논리적 구조가 변경되어도 응용 프로그램에는 영향 X
          
      - 물리적 독립성
        - 물리적 사상(개념적/내부적 사상)을 통해 물리적 독립성이 보장됨
        - 내부 스키마가 변경되어도 외부.개념 스키마는 영향 X
        - 저장장치의 구조변경은 응용프로그램과 개념스키마에 영향 X
     
    - 데이터 독립성이 유지되지 않으면?
      - 데이터의 중복성 및 복잡도 증가
        
      - 요구사항 대응 난이도 증가 -> 데이터 유지보수 비용 증가
     
        
---
    
### 04. 데이터 모델의 구성요소
- 개체, 관계/차수, 속성/식별자
  - 개체(엔터티, Entity) : 업무와 관련된 데이터 집합. 개념, 사건, 장소 등의 **명사**(things)
    
  - 속성(Attribute)     : 어떤 것이 갖는 성격
    
  - 관계(Relationship)  : 어떤 것 간의 관계


![데이터 모델링의 3가지 구성 요소](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/59fd84be-ab04-4744-b122-11e0431fe20a)


```
- Schema vs Instance
  - 데이터베이스 스키마(Schema)
    - 데이터 모델링의 대상
    - 데이터베이스 구조, 데이터 타입, 제약조건에 대한 명세
    - 데이터베이스 설계 단계에서 명시, 자주 변경되지 않음
      
  - 데이터베이스 인스턴스(Instance) = 행
    - 특정 시점에 데이터베이스에 실제로 저장되어 있는 데이터 값의 전체 집합
```


---
    
### 05. 다양한 ERD 표기법 및 작성 순서
- Peter Chen 표기법, IE 표기법, Barker 표기법


![ERD 표기법](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/9553c1f3-f406-48b8-9d38-5cc0f48c1193)




- ERD 작성 순서
  1. 엔터티를 그린 후 적절하게 배치
      - 가급적 선 꼬이지 않게 배치
      - 왼쪽 -> 오른쪽, 위 -> 아래 순으로 읽어나가기 편하도록 배치
   
  2. 엔터티간 관계 설정
      - 식별자 관계를 우선 설정
        - **식별자 관계 : 부모로부터 상속받은 FK가 자식의 PK의 일부가 되는 관계**        
      - 가급적 Cycle 관계(= loop or 순환관계)도 발생하지 않아야 함
   
  3. 관계명 기술 (양 방향)
      - 현재형 사용, 지나치게 포괄적인 단어는 지양      
      - 실제 프로젝트에서는 크게 고려 X

  4. **관계차수와 선택성 표시**
 

---

### 06. 좋은 데이터 모델


![좋은 데이터 모델](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/3fe4fd96-768a-4eba-9c70-9f20b9c2e040)



---

### 07. 엔터티(Entity)
- 엔터티의 정의
  - 변별할 수 있는 사물 -Peter Chen(1976)
    
  - 데이터 베이스 내에서 변별 가능한 객체 -C.J Date(1986)
    
  - 정보를 저장할 수 있는 어떤 것 -James Martin(1989)
    
  - 정보가 저장될 수 있는 사람, 장소, 물건, 사건 그리고 개념 등 -Thomas Bruce(1992)
    
  - **인스턴스의 집합**
    => 업무에 필요한 정보를 저장하고 관리하기 위한 집합적인 것(Thing)


- 유무형에 따른 엔터티의 분류
  - 유형(Tangible) 엔터티
    - 물리적인 형태가 있고 안정적이며 지속적으로 활용됨
      
    - 교수, 강의실, 학생 등

  - 개념(Conceptual) 엔터티
    - 물리적인 형태는 존재하지 않으나 관리해야 할 개념적 정보
      
    - 수업, 보험상품 등
   
  - 사건(Event) 엔터티
    - 업무 수행 과정에서 발생하며 비교적 발생량이 많음 (각종 통계 자료에 이용)
      
    - 수강신청, 주문, 입금 등


- 발생 시점에 따른 엔터티의 분류
  - 기본 엔터티(Basic)
  - 중심 엔터티(Main)
  - 행위 엔터티(Active)


- 엔터티의 특징
  - 해당 업무에서 필요하고 관리하고자 하는 정보 포함
    
  - **유일한 식별자**에 의해 식별 가능
    
  - 영속적으로 존재하는 **(둘 이상) 인스턴스**의 집합
    
  - 업무 프로세스에 의해 이용
    - 업무 프로세스에 의해 CRUD(Create, Read, Update, Delete) 발생
    - CRUD 발생 X => 부적절한 엔터티 도출 또는 업무 누락
      
  - **반드시 속성 포함**
    - 속성 없이 엔터티의 이름만 존재할 수 없음
      
  - 주식별자만 존재하고 일반속성은 없는 경우도 바람직하지 않음
    - 단, 연관 엔터티(Associative Entity)는 주식별자 속상만 갖고 있어도 인정
      
  - 다른 엔터티와 **최소 한 개 이상의 관계**를 가져야 함
    - 고립 엔터티(Isolated Entity) : 부적절한 엔터티 도출 또는 관계 누락
    - 단, 다음의 경우 고립 엔터티 인정
      - 통계성 엔터티
      - 코드성 엔터티
      - 시스템 처리용 내부 엔터티(트랜잭션 로그 테이블 등)


- 엔터티의 명명
  - 엔터티 생성 의미대로, 실제 업무에서 사용하는 용어를 사용
    
  - 약어 사용 X
    
  - 단수 명사 사용
    
  - **동일한 이름의 엔터티 중복 존재 불가**


---

### 08. 관계(Relationship)
- 관계와 페어링(Pairing)
  - 관계
    - 엔터티간 논리적 연관성
   
  - 페어링
    - 엔터티 내 인스턴스 간의 개별적 연관성
   
  - 페어링의 집합 -> 관계
    - cf) 엔터티 <- 인스턴스의 집합을 논리적으로 표현
   
  => Chen 모델에서 관계는 속성을 가질 수 있었으나, IE 모델에서 관계는 속성을 갖지 않음

- 관계의 분류
  - 존재에 의한 관계 vs 행위에 의한 관계

 
![관계의 분류](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/c2a9fe75-a41d-45dc-afe7-58b96ce31089)




- 관계의 표기법
  - 관계명(Membership)
    - 엔터티간 관계가 맺어진 형태
      
    - 각 관계는 두 방향의 관계명을 가짐
      - 관계시작점(The Beginning) : 관계가 시작되는 쪽
      - 관계끝점(The End) : 관계를 받는 쪽

    - 관점에 따라 능동적(Active) or 수동적(Passive)으로 명명
      
    - 명명 규칙
      - 애매한 동사를 피함 (ex. 관계된다, 관련있다 등 X)
      - 현재형으로 표현 (ex. 신청했다, 강의할 것이다 등 X)
     
![관계의 표기](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/5e8e9a4f-5685-40a6-83db-b2a79c422720)



  - 관계 차수(Degree / Cardinality)
    - 각 관계에 참여할 수 있는 인스턴스 수(= 두 엔터티간 관계에서 수행되는 경우의 수)
      
    - 1:N, 1:1, M:N 등
      
    - 학계에서의 대응수(Cardinality)에 해당하는 개념
      - 학계에서 차수(Degree)는 unary, binary, ternary, N-ary 의미
      - 튜플(행) 수 (= 인스턴스 수)
      - 중복도가 낮으면 카디널리티 높음  <- 상대적 개념


![관계차수](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/fbe8750c-3b92-4a23-a70f-0143dc33139f)



  - 관계 선택성(Optionality)
1. 필수 참여(Mandatory Membership)
   - 관계에서 항상 참여

![필수참여](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/2e872294-a2df-44de-933a-86f4e5d6c9ee)


2. 선택 참여(Optional Membership)
   - 관게에서 참여할 수 도 있고 안할수도 있음

![선택참여](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/a1d6c502-e36a-45c5-b698-64294254c245)<br>
      => 관계의 양쪽이 Optional 인 경우, 해당 관계는 잘못 설정되었을 가능성이 큼


---

### 09. 속성(Attribute)
- 속성의 정의
  - 사물의 특징 또는 본질적인 성질, 업무에서 필요한 정보인 엔터티가 가지는 항목
    - 속성이 없다면 실체를 생각할 수 없음
      
  - 인스턴스에 대해 의미상 **더 이상 분리되지 않는** 최소의 데이터 단위
    
  - 엔터티에 속한 인스턴스들의 성격을 구체적으로 나타냄
    - 인스턴스 각각을 구분할 수 있는 기준 파악 -> 이름 부여 -> 속성화
      
  - 엔터티, 인스턴스, 속성, 속성값의 대응
    - 각 엔터티는 둘 이상의 인스턴스를 가짐
    - 각 엔터티는 둘 이상의 속성을 가짐
    - 각 속성은 하나의 속성값을 가짐

   
- 속성의 특징
  - 해당 업무에서 필요하고 관리해야 하는 정보

  - 모든 속성은 주식별자에 함수적으로 종속되어야 함
    
  - 하나의 속성은 **한 개의 값**만을 가져야 함
    - 속성이 다중값을 가질 경우 해당 속성을 별도의 엔터티로 분리함

   
- 속성의 명명
  - 현업에서 사용하는 이름을 부여
    
  - 약어 사용은 가급적 금지
    
  - 서술식 속성명을 피하고 명사형 속성명을 사용
    
  - 수식어와 소유격을 피함
    
  - **속성의 이름은 가급적 전체 모델에서 유일하게 정의**
 
- 속성의 표기
  - 엔터티 내에 이름을 기재
    
 ![속성의 표기](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/9ebcfc79-2664-4c52-a747-9188a6ca9dd0)


- 도메인(Domain)
  - 각 속성이 가질 수 있는 **값의 범위**
    - ex. 학점 : 0.0~4.5 사이의 실수
    - ex. 주소 : 길이가 20자리 이내인 문자열
      
  - 속성에 대한 데이터 타입과 크기, 그리고 제약 사항을 지정하는 개념

- 속성의 분류
  - 속성의 특성에 따른 분류
    - 기본 속성(Basic Attribute)
      - 가장 일반적인 속성
      - 원래의 업무로부터 유래한 속성
      - ex. 제품이름, 제조년원, 제조원가
        
    - 설계 속성(Designed Attribute)
      - 데이터 모델링을 위해 새로 만든 속성 (주로 코드)
      - 계속 사용하다보면 구분이 애매해짐
      - ex. 약품용기코드, 주문번호, 학번
        
    - 파생 속성(Derived Attribute)
      - 다른 속성들로부터 유도된 속성 (주로 통계 관련)
        - 타 속상에 의해 영향을 받아 자신의 값이 변함
      - 가급적 적게 정의하는 것이 좋음
      - ex. 계산값, 주문수량, 총주문금액
     
  - 엔터티 구성 방식에 따른 분류
    - PK(Primary Key) 속성 : 엔터티의 인스턴스를 구별할 수 있는 속성
      
    - FK(Foreign Key) 속성 : 타 엔터티의 PK를 참조하는 속성
      
    - 일반 속성 : 그 외의 속성

![속성의 분류_엔터티](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/ba74ef01-4e97-439c-b257-1c3ad9464105)



  - 분리 가능성에 따른 분류
    - 복합 속성(Composite Attribute) vs **단순 속성(Simple Attribute)**
      => 복합 속성을 분해해서 단순 속성으로 만든 뒤 적용

  - 속성값의 수에 따른 분류
    - 다중값 속성(Multi-Valued Attribute) vs **단일값 속성(Single-Valued Attribute)**


---

### 10. 식별자(Identifier)
- 식별자의 분류


![식별자의 분류](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/8ee1fa26-52da-4f08-8db8-184d81d34fe8)



- 식별자의 특징



![식별자의 특성](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/e0a15e03-ee70-4e14-b3b9-374ffb880220)




- 주식별자 도출 기준
  - 유일성을 갖는 속성 중 해당 업무에서 자주 이용되는 속성을 지정
    
  - 명칭, 내역 등과 같이 이름으로 기술되는 것들은 가능하면 주식별자로 지정하지 않음
    
  - 복합식별자를 구성할 경우 너무 많은 속성이 포함되지 않아야 함
 

- 식별자 관계와 비식별자 관계
  - 부모 엔터티의 식별자 A를 자식 엔터티의 외부식별자 A(FK)로 포함할 때
    - A(FK)가 주식별자에 포함된 경우 -> 식별자 관계
    - A(FK)가 비식별자 속성으로 포함된 경우 -> 비식별자 관계
      
![식별자관계와 비식별자관계](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/cde9dcec-600d-4672-9dee-3c88ee35a120)



- 식별자 관계(Identifying Relationship)
  - 부모의 주식별자가 자식엔터티의 주식별자로 상속
 
  - 반드시 부모엔터티가 생성되어야 자식 엔터티 생성 가능
    - 해당 속성이 Not Null 이므로 -> weak entity 에 해당

  - 자식 엔터티의 주식별자가 해당 속성만으로 구성되는 경우 -> 1:1 관계
    
  - 자식 엔터티의 주식별자가 해당 속성 + α 로 구성되는 경우 -> 1:N 관계
    
```
  weak entity : 자기 혼자만은 식별자를 생성 불가, 다른 주변 엔터티의 도움을 받아야만 식별자 생성 가능
                자식 엔터티 내 일반 속성에 FK 있으면 weak entity 
```

- 비식별자 관계(Non-Identifying Relationship)
  - 부모엔터티로부터 속성을 받았지만 자식엔터티의 주식별자로 사용하지 않고 일반적인 속성으로만 사용
    
  - 다음의 경우 비식별자 관계가 생성 -> 부모 엔터티 없이 자식 엔터티 생성 가능
    - 부모 엔터티와 자식 엔터티의 관계가 약한 경우
      - 자식엔터티에서 받은 속성이 필수가 아니어도 무방
  
    - 엔티티별 데이터 생명주기(Life Cycle)를 다르게 관리할 경우
      - ex) 부모엔터티에 인스턴스가 자식의 엔터티와 관계를 가지고 있지만 자식만 남겨두고 먼저 소멸하는 경우
        
    - 여러개의 엔터티가 하나의 엔터티로 통합되어 표현되었는데, 각각의 엔터티가 별도의 관계를 가질 때
        
    - 자식 엔터티의 주식별자로 사용해도 되지만, 일반 속성으로 두는 것이 유리할 때
      - 자식 엔터티의 독립적인 주식별자 설정이 필요한 경우 등


- 식별자 관계 남용시 문제
  - 주식별자 속성이 지속적으로 증가 => 중복률 높아짐
    
  - 조회시 조인 횟수 증가
 
```
 조인 : 한 테이블에서는 답을 내지 못해서 테이블과 옆의 테이블까지 연결하는 것
        약간의 성능 저하 발생 (속도 느려짐)
```
 
- 비식별자 관계를 고려해야 하는 경우
  - 부모 엔터티와 자식 엔터티의 관계의 강도가 약한 경우
    
  - 자식 엔터티의 독립적인 주식별자 설정이 필요한 경우
    
  - PK 속성의 단순화가 필요한 경우
    - SQL 복잡도 증가로 인해 개발 생산성이 저하되는 현상 방지


![식별자 관계 고려](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/962c411b-96e3-4ff6-af72-8005d66a6d0d)



---

### 11. ER Diagram 
- Peter Chen 표기법


![PeterChen표기법](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/b0f2d05d-c5da-4ede-af9a-c70ebaf9b224)





- Schema Diagram (Logical)
  - 화살표가 어디에서 왔는지 가르키고 있다고 생각하면 이해하기 편함
 
    ![Schema Diagram](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/818c95bc-d56d-496c-a9a1-db290ba50476)



- ER Diagram (Conceptual / Logical)
  - Information Engineering 표기법 (= Crow's Foot Model)
 
![ER Diagram](https://github.com/silverywaves/IT_ACADEMY/assets/155939946/d0a0ba89-2404-4347-b51f-597d46ce3ae8)




